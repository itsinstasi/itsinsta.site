<!DOCTYPE html>
<html lang="Ru-ru">
  <head>
    <meta charset="UTF-8"/>
    <title>Личный Бренд Платформа</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="css/links-page.css"/>
    <link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="img/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="img/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="img/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-icon-180x180.png"/>
    <link rel="icon" type="image/png" sizes="192x192" href="img/favicon/android-icon-192x192.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png"/>
    <link rel="manifest" href="img/favicon/manifest.json"/>
    <meta name="msapplication-TileColor" content="#fff"/>
    <meta name="msapplication-TileImage" content="img/favicon/ms-icon-144x144.png"/>
    <meta name="theme-color" content="#fff"/>
<!--    <meta name="description" content="Описание"/>
    <meta name="keywords" content="Ключевые слова через запятую"/>
    <link rel="image_src" href="https://site.com/img/og/og.jpg"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://..."/>
    <meta property="og:image" content="https://.../img/og/og.jpg"/>
    <meta property="og:image:type" content="image/jpeg"/>
    <meta property="og:image:width" content="1024"/>
    <meta property="og:image:height" content="512"/>
    <meta property="og:title" content="..."/>
    <meta property="og:description" content="..."/>
    <meta property="og:locale" content="Ru-ru"/>
    <meta property="og:site_name" content="https://..."/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="https://..."/>
    <meta name="twitter:title" content="..."/>
    <meta name="twitter:description" content="..."/>
    <meta name="twitter:creator" content="..."/>
    <meta name="twitter:image:src" content="https://.../img/og/twitter.jpg"/>
    <meta name="twitter:domain" content="https://...."/>-->
    <meta name="theme-color" content="#755ea2"/>
    <meta name="msapplication-navbutton-color" content="#755ea2"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="#755ea2"/>
  </head>
  <body><!--[if lt IE 8]>
  <p class="browserhappy">
    Ваш браузер <strong>устарел</strong>. Пожалуйста <a href="https://browsehappy.com/"  target="_blank">обновите</a>.
  </p>
<![endif]-->
<noscript>
  <p class="intro">
  	Вам нужно включить JavaScript в своем браузере, чтобы  отображение этой страницы было корректн
  </p>
</noscript>

    <div class="wrapper">
           <header class="header">
  <div class="header__wrap">
    <div class="header__bar">
      <a href="/" class="header__logo-desc header__logo-round"><img src=""></a>
      <a href="/" class="header__logo-mob header__logo-round"><img src=""></a>
      <div class="header-list">
        <div class="header-list__btn js-list-btn"><span>Мой проект</span> <!--<i class="fa fa-caret-down" aria-hidden="true"></i>--></div>
        <!--<nav class="header-list__nav js-list-hide">
          <div class="header-list__nav-title">Мои проекты</div>
          <ul>
            <li><a href="#">Мой проект</a></li>
            <li><a href="#">Другой мой проект</a></li>
            <li><a href="add-new-project.html" class="header-list__nav-btn">+&nbsp;&nbsp;Добавить новый проект</a></li>
          </ul>
        </nav>-->
      </div>
      <a href="edit.html?project={profile}" class="header__tool" title="Настроить проект">
        <i class="fa fa-cogs" aria-hidden="true"></i>Изменить проект
      </a>
    </div>
    <div class="header__bar">
      <div class="header-list">
        <div class="header-list__btn js-list-btn">
          <div class="avatar"></div> <i class="fa fa-caret-down" aria-hidden="true"></i>
        </div>
        <nav class="header-list__nav header-list__nav_right js-list-hide">
          <ul>
            <!--<li><a href="#"><div class="avatar header-list__nav-avatar"></div>user_name</a></li>-->
            <!--<li><a href="price.html">Цены и тарифы</a></li>-->
            <li><a href="profile.html">Профиль</a></li>
            <li><a href="login.html?reload=true" class="header-list__nav-btn"><i class="fa fa-sign-out" aria-hidden="true"></i>&nbsp;&nbsp;Выйти</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>
      <main class="dash">
        <!--<div class="dash__overlay" id="js-dash-overlay"></div><div class="alert js-alert">
  <button class="btn alert__close js-alert-close"><i class="fa fa-times" aria-hidden="true"></i>Закрыть</button>
  Тут какое-нибудь важное сообщение пользователю
  <a href="#">Ссылка</a>
</div>-->
        <div class="container">
          <div class="dash__wrap"><div class="profile">
  <!--<section class="profile__sec profile__header">
    <h2 class="profile__title">Профиль</h2>
    <div class="profile__sec-wrap">
      <div class="profile__header-wrap">
        <div class="avatar profile__header-avatar"></div>
        <div class="profile__header-main">
          <div class="profile__header-name">...</div>
          <div class="profile__header-time">Создан: <span>...</span>/div>
        </div>
      </div>
    </div>
  </section>-->
  
  <section class="profile__sec profile__edit">
    <h2 class="profile__title">Редактировать профиль</h2>
    <div class="profile__sec-wrap">
      <form action="https://admapi.itsinsta.site/api/users/profile" method="put" class="form">
        <fieldset class="fieldset">
          <!--<div class="form__group">
            <span class="label__legend">Изображение (jpg, png, gif)</span>
            <div class="file">
              <label class="file__label">   
                <div class="avatar file__avatar"></div>          
                <input id="js-upload" type="file" hidden>
                <span class="file__upload" id="js-upload-name"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Загрузить</span>
              </label>
              <span class="file__delet" id="js-upload-del" title="Удалить"><i class="fa fa-trash" aria-hidden="true"></i></span>
            </div>
          </div>-->
          <div class="form__group">
            <label class="label">
              <span class="label__legend">E-mail</span>
              <input type="mail" class="input" name="email">
            </label>
          </div>
          <div class="form__group">
            <label class="label">
              <span class="label__legend">Имя</span>
              <input type="text" class="input" name="name">
            </label>
          </div>
          <!--<div class="form__group">
            <label class="label">
              <span class="label__legend">Немного о себе</span>
              <textarea class="textarea"></textarea>
            </label>
          </div>-->
          <div class="form__group">
            <label class="label">
              <span class="label__legend">Новый пароль</span>
              <input type="password" class="input js-pass-group-hide-opener" name="password">            
            </label>
            <button class="btn show-pass js-show-hide-pass" type="button"></button>
          </div>
          <div class="form__group form__group_hide js-pass-group-hide">
            <label class="label">
              <span class="label__legend">Текущий пароль</span>
              <input type="password" class="input" name="passwordCurrent">
            </label>
            <button class="btn show-pass js-show-hide-pass" type="submit"></button>
          </div>
        </fieldset>
        <button class="btn btn_viol submit" type="submit">Сохранить</button>
      </form>
    </div>
  </section>
</div>
          </div>
        </div>
      </main>
    </div>
    <script src="js/vendors.min.js"></script>
    <script src="js/scripts.min.js"></script>
<script type="text/javascript" >
var project = {};
$(document).ready(function(){

  setDefaultProject(function(projectName) { 
    $("form").each(function(index, element){
      $(element).attr("action", $(element).attr("action").replace("{profile}", projectName));
    });
    $(".header__tool").each(function(index, element){
      $(element).attr("href", $(element).attr("href").replace("{profile}", projectName));
    });

    requestProject(projectName, function(response) {
        project = response;

        $(".header__logo-desc > img").attr("src", project.logoUrl);
        $(".header__logo-mob > img").attr("src", project.logoUrl);
        $(".header-list__btn > span").text(project.userName);
        /*$(".smartpage-header__pic > img").attr("src", project.logoUrl);*/
    });
  });

  requestProfile(function(response) {
    $("[name='name']").val(response.name);
    $("[name='email']").val(response.email);

    if (response.email) {
      $("input[name='email']").prop('disabled', true);
    }

    if (!response.hasPassword || !(response.email)) {
       $(".js-pass-group-hide").remove();
    }
  });

    $('form').submit(function(){
        $('form .btn').prop('disabled', true);

	event.preventDefault(); //prevent default action 

	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	var form_data = JSON.stringify(getFormData($(this)));

	$.ajax({
		url : post_url,
		type: request_method,
                contentType: 'application/json',
		data : form_data,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("Authorization", "Bearer " + getLogin().token);
        },
	}).done(function(response){
                window.location.href = "./page.html?project=" + project.userName;
	}).fail(function(){
                $('form .btn').prop('disabled', false);
	});

        return false;
    });
});
</script>
  </body>
</html>